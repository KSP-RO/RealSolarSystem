// *******************************************************************************
 // Revised: Apr 22, 2021             Despina / (Neptune)                      805

 // SATELLITE PHYSICAL PROPERTIES:
  // Radius (km)             =  74 +- 10       Density (g cm^-3)   =              
  // GM (km^3/s^2)           =  1.16732(10)^-1 Geometric Albedo    =  0.06 
                                            // V(1,0)              = +7.9 

 // SATELLITE ORBITAL DATA (see ephemeris):
  // Semi-major axis, a (km) = 52.526(10^3)    Orbital period      = 0.334655 d
  // Eccentricity, e         = 0.0             Rotational period   = 
  // Inclination, i  (deg)   = 0.07

 // Fit to all reported data through 2020 (Voyager 2, ground, HST)
// *******************************************************************************


// *******************************************************************************
// Ephemeris / WWW_USER Sat Apr  9 01:41:04 2022 Pasadena, USA      / Horizons
// *******************************************************************************
// Target body name: Despina (805)                   {source: nep097}
// Center body name: Neptune (899)                   {source: nep097}
// Center-site name: BODY CENTER
// *******************************************************************************
// Start time      : A.D. 1949-Dec-31 22:09:50.4000 TDB
// Stop  time      : A.D. 1949-Dec-31 22:09:51.4000 TDB
// Step-size       : 1440 minutes
// *******************************************************************************
// Center geodetic : 0.00000000,0.00000000,0.0000000 {W-lon(deg),Lat(deg),Alt(km)}
// Center cylindric: 0.00000000,0.00000000,0.0000000 {W-lon(deg),Dxy(km),Dz(km)}
// Center pole/equ : IAU_NEPTUNE                     {West-longitude positive}
// Center radii    : 24764.0 x 24764.0 x 24341.0 km  {Equator, meridian, pole}    
// Keplerian GM    : 6.8351000851786556E+06 km^3/s^2
// Output units    : KM-S, deg
// Output type     : GEOMETRIC osculating elements
// Output format   : 10
// Reference frame : IAU_NEPTUNE body equator and node of date
// *******************************************************************************
// JDTDB
   // EC    QR   IN
   // OM    W    Tp
   // N     MA   TA
   // A     AD   PR
// *******************************************************************************
// $$SOE
// 2433282.423500000 = A.D. 1949-Dec-31 22:09:50.4000 TDB 
 // EC= 1.373840924345407E-03 QR= 5.251583841088437E+04 IN= 5.174272243863545E-01
 // OM= 3.388843512708181E+02 W = 6.024768908222790E+01 Tp=     1141.589471097306
 // N = 1.242121342051411E-02 MA= 3.458200735408886E+02 TA= 3.457814438209027E+02
 // A = 5.258808607566812E+04 AD= 5.266033374045187E+04 PR= 2.898267567043380E+04
// $$EOE
// *******************************************************************************
 
// TIME

  // Barycentric Dynamical Time ("TDB" or T_eph) output was requested. This
// continuous relativistic coordinate time is equivalent to the relativistic
// proper time of a clock at rest in a reference frame comoving with the
// solar system barycenter but outside the system's gravity well. It is the
// independent variable in the solar system relativistic equations of motion.

  // TDB runs at a uniform rate of one SI second per second and is independent
// of irregularities in Earth's rotation.

  // Calendar dates prior to 1582-Oct-15 are in the Julian calendar system.
// Later calendar dates are in the Gregorian system.

// REFERENCE FRAME AND COORDINATES

  // Body equator and node of date (IAU_NEPTUNE)

    // Reference epoch: "of date"
    // Reference plane: FK4/B1950.0 
    // X-Y plane: central-body IAU_NEPTUNE equator plane at reference epoch
    // X-axis   : out along the ascending node of the central-body IAU_NEPTUNE
                // equator plane on the reference plane at the reference epoch
    // Z-axis   : along the central-body IAU_NEPTUNE north-pole at the reference
                // epoch

  // Symbol meaning:

    // JDTDB    Julian Day Number, Barycentric Dynamical Time
      // EC     Eccentricity, e
      // QR     Periapsis distance, q (km)
      // IN     Inclination w.r.t X-Y plane, i (degrees)
      // OM     Longitude of Ascending Node, OMEGA, (degrees)
      // W      Argument of Perifocus, w (degrees)
      // Tp     Time of periapsis relative to epoch (P-E) (sec)
      // N      Mean motion, n (degrees/sec)
      // MA     Mean anomaly, M (degrees)
      // TA     True anomaly, nu (degrees)
      // A      Semi-major axis, a (km)
      // AD     Apoapsis distance (km)
      // PR     Sidereal orbit period (sec)

// ABERRATIONS AND CORRECTIONS

 // Geometric osculating elements have NO corrections or aberrations applied.

// Computations by ...

    // Solar System Dynamics Group, Horizons On-Line Ephemeris System
    // 4800 Oak Grove Drive, Jet Propulsion Laboratory
    // Pasadena, CA  91109   USA

    // General site: https://ssd.jpl.nasa.gov/
    // Mailing list: https://ssd.jpl.nasa.gov/email_list.html
    // System news : https://ssd.jpl.nasa.gov/horizons/news.html
    // User Guide  : https://ssd.jpl.nasa.gov/horizons/manual.html
    // Connect     : browser        https://ssd.jpl.nasa.gov/horizons/app.html#/x
                  // API            https://ssd-api.jpl.nasa.gov/doc/horizons.html
                  // command-line   telnet ssd.jpl.nasa.gov 6775
                  // e-mail/batch   https://ssd.jpl.nasa.gov/ftp/ssd/hrzn_batch.txt
                  // scripts        https://ssd.jpl.nasa.gov/ftp/ssd/SCRIPTS
    // Author      : Jon.D.Giorgini@jpl.nasa.gov
// *******************************************************************************

@Kopernicus:FOR[RealSolarSystem]
{
	// Despina
	Body
	{
		name = Despina
		finalizeOrbit = true
		flightGlobalsIndex = 27
		cacheFile = RealSolarSystem/RSSKopernicus/Cache/Despina.bin
		Template
		{
			name = Bop
			removePQSMods = PQSMod_FlattenArea, PQSMod_MapDecal, PQSMod_VertexSimplexNoiseColor, PQSMod_VertexSimplexHeightAbsolute, PQSMod_VertexHeightNoise, PQSLandControl
		}
		Orbit
		{
			// Target body name: Despina (812)
			// Center body name: Neptune (899)
			// Center-site name: BODY CENTER
			referenceBody = Neptune
			semiMajorAxis = 52588086.07566812
			eccentricity = 0001.373840924345407
			inclination = 0.5174272243863545
			meanAnomalyAtEpochD = 345.8200735408886
			longitudeOfAscendingNode = 338.8843512708181
			argumentOfPeriapsis = 60.24768908222790
			color = 1.0, 1.0, 1.0, 1.0
		}

		Properties
		{
			displayName = Despina
			description = #RSS_Despina_desc
			radius = 170000
			//gravParameter = 1.4279E+12
			mass = 3.1E+19
			solarRotationPeriod = False
			rotationPeriod = 507773
			tidallyLocked = true
			initialRotation = 0
			isHomeWorld = false
			timewarpAltitudeLimits = 0 1000 5000 10000 20000 50000 60000 100000

			biomeMap = RSS-Textures/PluginData/TritonBiomes.dds

			Biomes
			{
				Biome
				{
					name = Flatlands
					displayName = #RSS_Triton_Biome1
					value = 3.0             // Distance based multiplier score?
					color = 1,1,1,1
				}
				Biome
				{
					name = Northern Polar Region
					displayName = #RSS_Triton_Biome2
					value = 3.0
					color = 0,0,0,1
				}
				Biome
				{
					name = Southern Polar Region
					displayName = #RSS_Triton_Biome3
					value = 3.0
					color = 0.5,0.5,0.5,1
				}

			}

			ScienceValues
			{
				landedDataValue = 12
				flyingLowDataValue = 11.5
				flyingHighDataValue = 11.5
				inSpaceLowDataValue = 11
				inSpaceHighDataValue = 10
				recoveryValue = 11
				flyingAltitudeThreshold = 7000
				spaceAltitudeThreshold = 80000
			}

		}
		ScaledVersion
		{
			type = Vacuum  // It's really atmospheric, but thin - don't have the figures yet (Grayduster)
			fadeStart = 50000
			fadeEnd = 52000
			Material
			{
				texture = RSS-Textures/PluginData/TritonColor.dds
				normals = RSS-Textures/PluginData/Flat_NRM.dds
				shininess = 0.1
				specular = 0.1,0.1,0.1,1
			}
		}
		PQS
		{
			maxQuadLengthsPerFrame = 0.03
			minLevel = 2
			maxLevel = 12
			minDetailDistance = 8
			deactivateAltitude = 110000
			fadeStart = 72000
			fadeEnd = 97000

			materialType = AtmosphericTriplanarZoomRotation
			Material
			{
				factor = 12
				factorBlendWidth = 0.01
				factorRotation = 70
				
				saturation = 1.7
				contrast = 0.8
				tintColor = 1,1,1,0
				specularColor = 0.2,0.2,0.2,0.2
				albedoBrightness = 1
				
				steepPower = 1
				steepTexStart = 20000
				steepTexEnd = 30000
				steepTex = BUILTIN/terrain_rock00
				steepTexScale = 1,1
				steepTexOffset = 0,0
				steepBumpMap = BUILTIN/Cliff (Layered Rock)_NRM
				steepBumpMapScale = 1,1
				steepBumpMapOffset = 0,0
				steepNearTiling = 1
				steepTiling = 1
				
				lowTex = RealSolarSystem/Terrain/PluginData/Encelade_Diffuse.dds
				lowTexScale = 1,1
				lowTexOffset = 0,0
				lowTiling = 30000
				
				midTex = RealSolarSystem/Terrain/PluginData/Encelade_Diffuse.dds
				midTexScale = 1,1
				midTexOffset = 0,0
				midTiling = 20000
				midBumpMap = RealSolarSystem/Terrain/PluginData/Encelade_Normal.dds
				midBumpMapScale = 1,1
				midBumpMapOffset = 0,0
				midBumpTiling = 20000
				
				highTex = RealSolarSystem/Terrain/PluginData/Encelade_Diffuse.dds
				highTexScale = 1,1
				highTexOffset = 0,0
				highTiling = 30000
				
				lowStart = -1
				lowEnd = -1
				highStart = 2
				highEnd = 2
				
				globalDensity = 1
				
				fogColorRamp =
				fogColorRampScale = 1,1
				fogColorRampOffset = 0,0
				
				planetOpacity = 1
				oceanFogDistance = 1000
			}
			Mods
			{
				VertexColorMap
				{
					map = RSS-Textures/PluginData/DespinaColor.dds
					order = 10
					enabled = true
				}
				VertexHeightMap
				{
					map = RSS-Textures/PluginData/DespinaHeight.dds
					offset = 0
					deformity = 22000.0
					scaleDeformityByRadius = false
					order = 11
					enabled = true
				}
				VertexSimplexHeight
				{
					seed = 221221
					deformity = 15.0
					octaves = 12.0
					persistence = 0.7
					frequency = 1.0
					enabled = true
					order = 102
				}
				VertexSimplexNoiseColor
				{
					seed = 455
					blend = 0.1
					colorStart = 0,0,0,1
					colorEnd = 1,1,1,1
					octaves = 12.0
					persistence = 0.7
					frequency = 2.0
					enabled = true
					order = 200
				}
				VertexHeightNoiseVertHeight
				{
					seed = 1283042385
					frequency = 8
					octaves = 9
					persistance = 0.6
					heightStart = 0
					heightEnd = 1
					deformity = 20
					mode = Low
				}
			}
		}
	}
}
